<div id="wide-sidebar" class="row" ng-init="init()">
    <div class="col-lg-2">
        <ul class="nav nav-tabs nav-stacked">
            <li><a href="#/sources">Data Source</a></li>
            <li><a href="#/configs">Setup Configurations</a></li>
            <li><a href="#/queues">Queue Data</a></li>
            <li><a href="#/registrations">Registrations</a></li>
            <li class="navigation-active"><a href="#/forms">Muzima Forms</a></li>
            <li><a href="#/errors">Error Data</a></li>
            <li><a href="#/reportConfigs">Patient Reports</a></li>
            <li><a href="#/settings">Settings</a></li>
            <li><a href="#/cohortDefinitions">Cohort Definitions</a></li>
        </ul>
    </div>
    <div class="col-lg-9">
        <div class="clearfix">

            <div class="row navbar navbar-inverse navbar-custom">
                <a class="navbar-brand" href="#/forms" style="color: #ffffff; font-size: 20px"><i
                        class="icon-home"></i></a>
                <div class="container-fluid navbar-right">
                    <span class="nav navbar-nav form-group" ng-hide="!hasHtmlForms() && searchIsEmpty()"
                        style="margin-right: 5px">
                        <form>
                            <input type="text" class="form-control navbar-btn" ng-model="searchQuery"
                                placeholder="Search..."
                                style="padding-left: 5px; padding-right: 5px; margin-right: 5px">
                        </form>
                    </span>
                    <span class="nav navbar-nav" style="margin-right: 5px">
                        <button type="button" class="btn btn-success dropdown-toggle navbar-btn" data-toggle="dropdown">
                            Import <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu">
                            <li><a href="#/xforms" style="color: #323232 ;text-decoration: none">Existing</a></li>
                            <li class="divider"></li>
                            <li><a href="#/import/forms" style="color: #323232 ;text-decoration: none">Upload</a></li>
                        </ul>
                    </span>
                </div>
            </div>

            <div class="row" ng-hide="!hasHtmlForms()">
                <div class="col-lg-8">
                    <h3>Import HTML Forms</h3>
                </div>
            </div>

            <div class="row" ng-hide="!hasHtmlForms()">
                <div class="pull-right" ng-click="showConvertedForms = !showConvertedForms; showColor = showConvertedForms? '#004f47' : '#eeeeee'" style="display: inline-flex; margin-bottom: 5px;">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                        id="Layer_1" x="0px" y="0px" viewBox="0 0 512 512"
                        style="enable-background:new 0 0 512 512;" xml:space="preserve" width="20px" height="20px">
                        <g>
                            <g>
                                <g>
                                    <path
                                        d="M487.464,232.092c-4.15-5.321-11.825-6.267-17.147-2.12c-5.32,4.15-6.269,11.826-2.12,17.147    c4.078,5.23,4.078,12.533,0,17.763c-29.884,38.315-68.55,67.106-112.08,84.513c22.879-24.497,36.888-57.346,36.888-93.395    c0-35.907-13.892-68.638-36.576-93.083c25.153,10.114,48.798,24.014,69.966,41.37c2.627,2.153,5.246,4.386,7.79,6.638    c5.052,4.473,12.772,4.003,17.245-1.048c4.473-5.051,4.003-12.773-1.048-17.245c-2.773-2.457-5.632-4.892-8.496-7.239    c-52.22-42.815-118.237-66.394-185.886-66.394c-91.043,0-175.408,41.221-231.463,113.094c-10.979,14.077-10.979,33.74,0,47.818    c56.055,71.873,140.42,113.094,231.463,113.094c91.041,0,175.407-41.221,231.464-113.094    C498.443,265.831,498.443,246.169,487.464,232.092z M43.804,264.882c-4.078-5.23-4.078-12.533,0-17.763    c29.877-38.308,68.535-67.095,112.057-84.504C133.006,187.1,118.995,219.936,118.995,256c0,36.051,14.01,68.9,36.865,93.386    C112.339,331.977,73.68,303.19,43.804,264.882z M256.149,368.567c-0.049,0-0.098,0.001-0.148,0.001    c-0.05,0-0.098-0.001-0.148-0.001c-62.007-0.08-112.424-50.542-112.424-112.567s50.416-112.487,112.424-112.567    c0.049,0,0.098-0.001,0.148-0.001c0.038,0,0.076,0.001,0.114,0.001c62.022,0.061,112.457,50.53,112.457,112.567    C368.572,318.025,318.156,368.487,256.149,368.567z"
                                        data-original="#000000" class="active-path" fill={{showColor}} />
                                </g>
                            </g>
                            <g>
                                <g>
                                    <path
                                        d="M256.001,204.16c-28.587,0-51.84,23.253-51.84,51.84s23.253,51.84,51.84,51.84s51.84-23.253,51.84-51.84    S284.588,204.16,256.001,204.16z M256.001,283.406c-15.108,0-27.406-12.298-27.406-27.406s12.298-27.406,27.406-27.406    s27.406,12.298,27.406,27.406S271.109,283.406,256.001,283.406z"
                                        data-original="#000000" class="active-path" fill={{showColor}} />
                                </g>
                            </g>
                            <g>
                                <g>
                                    <path
                                        d="M256.001,0c-6.748,0-12.217,5.469-12.217,12.217V58.03c0,6.748,5.469,12.217,12.217,12.217s12.217-5.469,12.217-12.217    V12.217C268.218,5.469,262.748,0,256.001,0z"
                                        data-original="#000000" class="active-path" fill={{showColor}} />
                                </g>
                            </g>
                            <g>
                                <g>
                                    <path
                                        d="M256.001,441.753c-6.748,0-12.217,5.469-12.217,12.217v45.813c0,6.748,5.469,12.217,12.217,12.217    s12.217-5.469,12.217-12.217V453.97C268.218,447.222,262.747,441.753,256.001,441.753z"
                                        data-original="#000000" class="active-path" fill={{showColor}} />
                                </g>
                            </g>
                            <g>
                                <g>
                                    <path
                                        d="M437.021,74.98c-4.771-4.77-12.505-4.77-17.279,0l-22.795,22.795c-4.771,4.771-4.771,12.506,0,17.279    c2.386,2.385,5.511,3.578,8.639,3.578c3.126,0,6.252-1.193,8.639-3.578l22.797-22.795    C441.792,87.488,441.792,79.753,437.021,74.98z"
                                        data-original="#000000" class="active-path" fill={{showColor}} />
                                </g>
                            </g>
                            <g>
                                <g>
                                    <path
                                        d="M115.055,396.946c-4.77-4.769-12.505-4.77-17.277,0l-22.797,22.795c-4.771,4.771-4.771,12.506,0,17.279    c2.386,2.385,5.513,3.578,8.639,3.578s6.252-1.193,8.639-3.578l22.797-22.795C119.826,409.453,119.826,401.719,115.055,396.946z"
                                        data-original="#000000" class="active-path" fill={{showColor}} />
                                </g>
                            </g>
                            <g>
                                <g>
                                    <path
                                        d="M115.055,97.776L92.258,74.98c-4.771-4.77-12.506-4.77-17.277,0c-4.771,4.773-4.77,12.507,0,17.279l22.797,22.795    c2.385,2.385,5.513,3.578,8.639,3.578s6.254-1.193,8.639-3.578C119.826,110.281,119.825,102.547,115.055,97.776z"
                                        data-original="#000000" class="active-path" fill={{showColor}} />
                                </g>
                            </g>
                            <g>
                                <g>
                                    <path
                                        d="M437.019,419.741l-22.795-22.795c-4.773-4.77-12.506-4.77-17.279,0c-4.771,4.773-4.771,12.507,0,17.279l22.797,22.795    c2.386,2.385,5.513,3.578,8.639,3.578c3.126,0,6.252-1.193,8.639-3.578C441.791,432.247,441.791,424.512,437.019,419.741z"
                                        data-original="#000000" class="active-path" fill={{showColor}} />
                                </g>
                            </g>
                        </g>
                    </svg>
                    <span style="margin-left: 5px;">{{showConvertedForms? ' hide' : 'show'}} converted forms</span>
                </div>
            </div>

            <div class="row" ng-repeat="form in htmlForms | filter:searchQuery" ng-hide="!showConvertedForms && form.converted">
                <div class="col-lg-12 panel panel-default">
                    <div class="row panel panel-heading content_wrap">
                        <strong>{{form.name}}</strong>
                        &nbsp;
                        <small ng-show="form.converted"
                            style="color: #145236; border: 1px solid #5cb85c; padding: 5px;">converted</small>
                        <div class="pull-right">
                            <input type="radio" ng-model="$parent.selectedHtmlFormId" ng-value="{{form.id}}"
                                style="width: 1.5em; height: 1.5em;" />
                        </div>
                    </div>
                    <div>
                        <p>
                            <small>{{form.description || ""}}</small>
                        </p>
                    </div>
                </div>
            </div>

            <div class="row" ng-show="!hasHtmlForms() && htmlFormEntryModuleStarted && searchIsEmpty()">
                <div class="col-lg-12 panel panel-default">
                    <div class="row panel panel-heading content_wrap">
                        <strong>No Available Forms in HTML From Entry Module</strong>
                    </div>
                    <div>
                        <p>Please create and design form using HTML Form Entry module. Once saved, forms would be
                            visible here.</p>
                    </div>
                </div>
            </div>

            <div class="row" ng-show="!hasHtmlForms() && htmlFormEntryModuleStarted && !searchIsEmpty()">
                <div class="col-lg-12">
                    <p>Your search returns no values. Try refining your search to get filter results.</p>
                </div>
            </div>

            <div class="row" ng-hide="htmlFormEntryModuleStarted">
                <div class="col-lg-12 panel panel-danger">
                    <div class="row panel panel-heading content_wrap">
                        <strong>HTMLFormEntry Module is not running</strong>
                    </div>
                    <div>
                        <p>You have not installed <b>"HTMLFormEntry Module"</b> or it is NOT started. Once it is
                            installed and started, and you have designed and saved some HTMLForms, those forms will be
                            visible here.</p>
                    </div>
                </div>
            </div>

            <!-- <div class="row panel panel-default" ng-show="totalItems > 1">
                <div class="col-lg-5">
                    <label for="xFormDiscriminator">Select Form Discriminator </label>
                    <select class="form-control" id="htmlFormDiscriminator" ng-model="discriminator"
                        ng-options="discriminator for discriminator in discriminatorTypes" required="true">
                    </select>
                </div>
            </div> -->

            <div class="row col-lg-12" style="margin-top: 20px;">
                <a href="#/forms" class="btn btn-danger" style="color: #ffffff; text-decoration: none;">Cancel</a>
                <!-- form preview -->
                <div ng-controller="ModalFormReviewCtrl as $ctrl" style="display: inline;">
                    <script type="text/ng-template" id="formReviewModalContent.html">
                        <div class="modal-header">
                            <h3 class="modal-title" id="modal-title">FORM CONVERSION</h3>
                        </div>
                        <div class="modal-container">
                            <div class="modal-body" id="modal-body">
                                <div class="form-details" ng-show="!$ctrl.converting">
                                    <table>
                                    <tbody>
                                        <tr>
                                        <td>UUID</td>
                                        <td>{{$ctrl.convertedForm.uuid? $ctrl.convertedForm.uuid : ''}}</td>
                                        </tr>
                                        <tr>
                                        <td>Name</td>
                                        <td>{{$ctrl.convertedForm.name? $ctrl.convertedForm.name : ''}}</td>
                                        </tr>
                                        <tr>
                                        <td>Description</td>
                                        <td>{{$ctrl.convertedForm.description? $ctrl.convertedForm.description : ''}}</td>
                                        </tr>
                                        <tr>
                                        <td>Discriminator</td>
                                        <td>{{$ctrl.convertedForm.discriminator? $ctrl.convertedForm.discriminator : ''}}</td>
                                        </tr>
                                    </tbody>
                                    </table>
                                </div>
                                <div class="form-review">
                                    <div ng-show="$ctrl.converting" class="wait-convert"></div>
                                    <uib-tabset active="active" ng-show="!$ctrl.converting">
                                        <uib-tab index="0" heading="HTML Review" class="tab-review" style="width: 50%; text-align: center !important; color: #004f47 !important;">
                                            <div bind-unsafe-html="$ctrl.convertedForm.html? $ctrl.getBody($ctrl.convertedForm.html) : ''"></div>
                                        </uib-tab>
                                        <uib-tab index="1" heading="HTML Code" class="tab-review" style="width: 50%; text-align: center !important; color: #004f47 !important;">
                                          <div>
                                            <pre>
                                              <code>
                                                  {{$ctrl.convertedForm.html? $ctrl.convertedForm.html : ''}}
                                              </code>
                                            </pre>
                                          </div>
                                        </uib-tab>
                                      </uib-tabset>
                                </div>
                        </div>
                        <div class="modal-footer" ng-show="!$ctrl.converting">
                          <button class="btn btn-primary modal-button" type="button" ng-click="$ctrl.edit()" uib-popover="Edit" popover-trigger="'mouseenter'" popover-placement="left">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" width="30px" height="30px" viewBox="0 0 528.899 528.899" style="enable-background:new 0 0 528.899 528.899;" xml:space="preserve" class=""><g><g>
                                <path d="M328.883,89.125l107.59,107.589l-272.34,272.34L56.604,361.465L328.883,89.125z M518.113,63.177l-47.981-47.981   c-18.543-18.543-48.653-18.543-67.259,0l-45.961,45.961l107.59,107.59l53.611-53.611   C532.495,100.753,532.495,77.559,518.113,63.177z M0.3,512.69c-1.958,8.812,5.998,16.708,14.811,14.565l119.891-29.069   L27.473,390.597L0.3,512.69z" data-original="#000000" class="active-path" data-old_color="#000000" fill="#E4E4E4"/>
                                </g></g> 
                            </svg>
                          </button>
                          <button class="btn btn-success modal-button" type="button" ng-hide="$ctrl.form.converted" ng-click="$ctrl.save()" uib-popover="Save" popover-trigger="'mouseenter'" popover-placement="left">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" width="30px" height="30px" viewBox="0 0 488.446 488.446" style="enable-background:new 0 0 488.446 488.446;" xml:space="preserve" class=""><g><g>
                                <g>
                                    <g>
                                        <path d="M153.029,90.223h182.404c5.427,0,9.873-4.43,9.873-9.869V0H143.137v80.354C143.137,85.793,147.571,90.223,153.029,90.223     z" data-original="#000000" class="active-path" data-old_color="#000000" fill="#E4E1E1"/>
                                        <path d="M480.817,122.864L377.88,19.494v60.859c0,23.404-19.043,42.447-42.447,42.447H153.029     c-23.409,0-42.447-19.043-42.447-42.447V0H44.823C20.068,0,0.002,20.07,0.002,44.808v398.831     c0,24.736,20.066,44.808,44.821,44.808h398.813c24.74,0,44.808-20.068,44.808-44.808V141.325     C488.444,134.392,485.698,127.758,480.817,122.864z M412.461,385.666c0,14.434-11.703,26.154-26.168,26.154H102.137     c-14.451,0-26.153-11.722-26.153-26.154V249.303c0-14.43,11.702-26.148,26.153-26.148h284.156     c14.465,0,26.168,11.72,26.168,26.148V385.666z" data-original="#000000" class="active-path" data-old_color="#000000" fill="#E4E1E1"/>
                                        <path d="M356.497,265.131H131.949c-9.008,0-16.294,7.273-16.294,16.28s7.286,16.28,16.294,16.28h224.549     c8.988,0,16.277-7.273,16.277-16.28S365.487,265.131,356.497,265.131z" data-original="#000000" class="active-path" data-old_color="#000000" fill="#E4E1E1"/>
                                        <path d="M323.936,330.264H164.508c-8.994,0-16.28,7.273-16.28,16.28c0,8.989,7.286,16.28,16.28,16.28h159.427     c8.994,0,16.281-7.291,16.281-16.28C340.217,337.537,332.93,330.264,323.936,330.264z" data-original="#000000" class="active-path" data-old_color="#000000" fill="#E4E1E1"/>
                                    </g>
                                </g>
                              </g></g>
                            </svg>
                          </button>
                          <button class="btn btn-warning modal-button" type="button" ng-click="$ctrl.cancel()" uib-popover="Cancel" popover-trigger="'mouseenter'" popover-placement="left">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 47.971 47.971" style="enable-background:new 0 0 47.971 47.971;" xml:space="preserve" width="30px" height="30px"><g><g>
                                <path d="M28.228,23.986L47.092,5.122c1.172-1.171,1.172-3.071,0-4.242c-1.172-1.172-3.07-1.172-4.242,0L23.986,19.744L5.121,0.88   c-1.172-1.172-3.07-1.172-4.242,0c-1.172,1.171-1.172,3.071,0,4.242l18.865,18.864L0.879,42.85c-1.172,1.171-1.172,3.071,0,4.242   C1.465,47.677,2.233,47.97,3,47.97s1.535-0.293,2.121-0.879l18.865-18.864L42.85,47.091c0.586,0.586,1.354,0.879,2.121,0.879   s1.535-0.293,2.121-0.879c1.172-1.171,1.172-3.071,0-4.242L28.228,23.986z" data-original="#000000" class="active-path" data-old_color="#000000" fill="#FEFCFC"/>
                              </g></g> 
                            </svg>
                          </button>
                        </div>
                      </div>

                        <div class="hide" id="alertContainer" style="z-index: 3147483647;">
                            <div class="position-absolute" id="alert">
                                <span>
                                    <i class="fas" id="alertIcon"></i>
                                </span>
                                <span id="alertMessage"></span>
                            </div>
                        </div>
                    </script>

                    <button type="button" class="btn btn-success"
                        ng-click="$ctrl.open('lg', getSelectedForm(), htmlFormEntryService, formService)" ng-show="isValidSelection()">
                        Convert
                    </button>
                </div>
                
                <ul uib-pagination total-items="totalItems" ng-model="currentPage" max-size="maxSize"
                    items-per-page="pageSize" boundary-links="true" force-ellipses="true" class="pull-right"></ul>
            </div>

        </div>
    </div>
</div>